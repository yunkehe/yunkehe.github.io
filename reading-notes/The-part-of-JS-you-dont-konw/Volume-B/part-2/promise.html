
<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Promise</title>
</head>
<body>
	<h2></h2>	
</body>
<script type="text/javascript">
	// Promise 通过某人使用它的方式，很容易分辨他是真正理解了这门技术，还是仅仅学习和使用API而已
	// 识别Promise
	// 鸭子类型 duck typing
	Promise.resolve( foo(42) )
	.then(function (v) {
		console.log( v );
	});
	
	// Promise
	// 1. 调用Promise的then会自动创建一个新的Promise从回调返回
	// 2. 在完成或拒绝处理函数内部，如果返回一个值或抛出一个异常，新返回的（可链接的）
	//    Promise就相应地决议
	// 3. 如果完成或拒绝处理函数返回一个Promise，它将会被展开，这样一来，不管它的决议值是什么
	//    都会成为当前then(...)返回的链接Promise的决议值

	// 构造器Promise
	var p = new Promise(function (X, Y) {
		// X() 用于完成
		// Y() 用于拒绝
	});

	var fullfillPr = Promise.resolve( 42 );
	var rejectPr = Promise.reject( 'Oops' );

	// 错误处理
	// try catch无法跨异步处理
	function foo(){
		setTimeout(function () {
			boz.bar();
		}, 100);
	}

	try{
		foo();

	}catch(err){

	}

	// ES6学习时再看Promise 生产环境应用Promise
	// P211
</script>
</html>